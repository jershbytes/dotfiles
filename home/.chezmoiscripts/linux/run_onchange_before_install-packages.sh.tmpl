#!/usr/bin/env bash
{{ if or (eq .osid "cachyos") (eq .osid "arch") -}}

# Ensure yay is installed
if ! command -v yay &> /dev/null; then
    echo "yay is not installed. Please install the yay binary before running this script."
    exit 1
fi

# Install packages using pacman
sudo pacman -S --needed --noconfirm {{ range .packages.arch.pacman -}}
{{ . | quote }} {{ end }}

# Install packages using yay
yay -S --needed --noconfirm {{ range .packages.arch.aur -}}
{{ . | quote }} {{ end }}

# Add update scrpt so /usr/local/bin
sudo tee /usr/local/bin/update >/dev/null <<'EOF'
#!/usr/bin/env zsh
yay -Syu --noconfirm
EOF

sudo chmod +x /usr/local/bin/update

{{ else -}}
# No Arch or CachyOS detected. Skipping package installation.
{{ end }}
