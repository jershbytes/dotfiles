# ~/.config/starship.toml

add_newline = false
command_timeout = 1000

format = """
$os$username$hostname$docker_context$python$nodejs$terraform$directory$git_branch$custom$git_status
$character
"""


# Replace the "‚ùØ" symbol in the prompt with "‚ûú"
[character]                            # The name of the module we are configuring is "character"
success_symbol = "[‚ûú](bold green)"     # The "success_symbol" segment is being set to "‚ûú" with the color "bold green"
error_symbol   = "[‚úó](bold red) "

# ---

[os]
format = '[$symbol](bold white) '
disabled = false

[os.symbols]
Windows = "Û∞ç≤ "
Arch = "ÔåÉ "
Macos = "ÔåÇ "
Mint = "Ôåé "

# ---y

# Shows the username
[username]
style_user = 'white bold'
style_root = 'black bold'
format = '[$user]($style) '
disabled = false
show_always = true

# Shows the hostname
[hostname]
ssh_only = false
format = 'on [$hostname](bold yellow) '
disabled = false

# Shows current directory
[directory]
truncation_length = 1
truncation_symbol = '‚Ä¶/'
home_symbol = 'Û∞ãú ~'
read_only_style = '197'
read_only = ' ÔÄ£ '
format = 'at [$path]($style)[$read_only]($read_only_style) '

# Shows current git branch
[git_branch]
symbol = 'Ôáí '
format = 'via [$symbol$branch]($style)'
truncation_symbol = '‚Ä¶/'
style = 'bold green'

# Shows current git status
[git_status]
conflicted = "=${count}"
ahead = "‚á°${count}"
behind = "‚á£${count}"
diverged = "‚áï‚á°${ahead_count}‚á£${behind_count}"
untracked = "?${count}"
stashed = "\\$${count}"
modified = "!${count}"
staged = "+${count}"
renamed = "¬ª${count}"
deleted = "‚úò${count}"

# ---

[docker_context]
format = 'via [üêã $context](blue bold) '

[python]
symbol = 'üêç '
pyenv_version_name = true

[nodejs]
format = 'via [ü§ñ $version](bold green) '

[terraform]
format = "[üèéüí® $version$workspace]($style) "


[custom.git_host]
when = "git rev-parse --is-inside-work-tree 2>/dev/null"
command = '''
remote=$(git remote get-url origin 2>/dev/null)

if [[ $remote == *github.com* ]]; then
  icon="ÔÇõ"
  web_url=$(echo "$remote" | sed -E 's|git@github.com:(.*)(\.git)?$|https://github.com/\1|; s|https://github.com/(.*)(\.git)?$|https://github.com/\1|')

elif [[ $remote == *gitlab.com* ]]; then
  icon="Ôäñ"
  web_url=$(echo "$remote" | sed -E 's|git@gitlab.com:(.*)(\.git)?$|https://gitlab.com/\1|; s|https://gitlab.com/(.*)(\.git)?$|https://gitlab.com/\1|')

elif [[ $remote == *dev.azure.com* || $remote == *ssh.dev.azure.com* ]]; then
  icon="Û∞†≥"
  # Azure DevOps SSH: git@ssh.dev.azure.com:v3/org/project/repo
  if [[ $remote == git@ssh.dev.azure.com:* ]]; then
    web_url=$(echo "$remote" | sed -E 's|git@ssh.dev.azure.com:v3/([^/]+)/([^/]+)/([^ ]+)(\.git)?$|https://dev.azure.com/\1/\2/_git/\3|')
  else
    # HTTPS format (already fine)
    web_url=$(echo "$remote" | sed -E 's|^(https://[^ ]+)(\.git)?$|\1|')
  fi

else
  icon="Ó¨Å"
  web_url=$(echo "$remote" | sed -E '
    s|git@([^:]+):([^ ]+)(\.git)?$|https://\1/\2|;
    s|https?://([^/]+)/(.*)(\.git)?$|https://\1/\2|;
  ')
fi

repo_name=$(basename -s .git "$remote")

# OSC 8 hyperlink formatting
esc="\033"
st="${esc}\\"
echo -e "$icon ${esc}]8;;$web_url${st}$repo_name${esc}]8;;${st}"
'''
format = ' [$output](bold blue) '




